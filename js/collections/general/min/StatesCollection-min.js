define(["underscore","backbone","models/general/StateModel","util/objectUtil"],function(t,e,o,n){var c=e.Collection.extend({model:o,countryId:"",url:"/Services/Taxonomy/TaxonomyService.asmx/GetStatesForLocation",initialize:function(t){t||(t={}),this.countryId=t.countryId},parse:function(e){var o=$.parseJSON(e.d);return t(o).map(function(t){return t})},fetch:function(){var t={};return t.data=JSON.stringify({id:this.countryId}),t.cache=!0,t.type="POST",t.contentType="application/json; charset=utf-8",t.dataType="json",t.success=this.fetchSuccess,t.error=this.fetchError,e.Collection.prototype.fetch.call(this,t)},fetchSuccess:function(t,e){n.isNullOrEmpty(sessionStorage)||sessionStorage.setItem("countryStatesCache",JSON.stringify({countryId:t.countryId,states:e.d}))},fetchError:function(t,e){console.log("could not get states for country:"+t.countryId),console.log(e)},outerScope:this});return c});