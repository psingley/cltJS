define(["jquery","underscore","backbone","marionette","app","event.aggregator","util/objectUtil","views/validation/SuccessView","views/validation/ErrorView","services/marketingCenterService","extensions/marionette/views/RenderedLayout"],function($,e,t,s,i,n,a,o,r,c,g){var u=g.extend({el:"#feedback-modal",events:{"click #submitButton":"submit","click .ratingsRow button":"setRanking"},ui:{$txtFeedback:"#txtFeedback",$messages:"#feedbackMessages",$ratingsButtons:".ratingsRow button"},initialize:function(e){this.ui.$txtFeedback.val(""),this.ui.$messages.html(""),i.addRegions({messagesRegion:"#feedbackMessages"}),n.on("feedback.complete",function(e){if(e){var t=new o([i.dictionary.get("common.Misc.ThankYou")]);i.messagesRegion.show(t)}}),i.messagesRegion.close()},rank:0,setRanking:function(e){e.preventDefault(),this.rank=parseInt($(e.target).html()),this.ui.$ratingsButtons.addClass("btn-info"),$(e.target).removeClass("btn-info")},submit:function(e){e.preventDefault();var t=[];if(a.isNullOrEmpty(this.ui.$txtFeedback.val())&&t.push(i.dictionary.get("common.FormValidations.FeedbackTextIsMissing")),(this.rank<=0||this.rank>10)&&t.push(i.dictionary.get("common.FormValidations.FeedbackRatingIsMissing")),0==t.length)i.messagesRegion.close(),c.feedback(this.ui.$txtFeedback.val(),this.rank),console.log("Feedback Modal Layout - Submission Sent");else{var s=new r(t);i.messagesRegion.show(s)}}});return u});